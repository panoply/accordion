function y(l){return{on:(a,t)=>{l[a]||(l[a]=[]),l[a].push(t)},off:(a,t)=>{let n=[],e=l[a];if(e&&t){let c=0,f=e.length;for(;c<f;c++)e[c]!==t&&n.push(e[c])}n.length?e[a]=n:delete e[a]},emit:(a,t,n)=>{let e=l[a]||[],c=e.length,f=null;for(let o=0;o<c;o++){let s=e[o].apply(t,[n]);f===null&&s===!1&&(f=!0)}return f}}}function L(l,a){let{config:t}=l,{classes:n}=t;return e=>{let c=o=>{if(typeof o!="number")return l.active!==e.number&&(l.active=e.number),e;if(l.folds[o])return l.active=e.number,l.folds[o];throw new TypeError(`No fold exists at index: ${o}`)},f=o=>{o.button.ariaDisabled="false",o.button.ariaExpanded="false",o.button.classList.remove(n.opened),o.content.classList.remove(n.expanded),o.expanded=!1,o.content.style.maxHeight="0"};e.open=o=>{let s=c(o);s.expanded||s.disabled||(s.close(),s.button.ariaDisabled="true",s.button.ariaExpanded="true",s.button.classList.add(n.opened),s.content.classList.add(n.expanded),s.content.style.maxHeight=`${s.content.scrollHeight}px`,s.expanded=!0,s.disable(),a.emit("expand",l,s))},e.focus=()=>{l.active=e.number,e.button.classList.add(n.focused),a.emit("focus",l,e)},e.blur=()=>e.button.classList.remove(n.focused),e.enable=o=>{let s=c(o);s.disabled&&(s.disabled=!1,s.button.ariaDisabled="false",s.button.classList.remove(n.disabled))},e.disable=o=>{let s=c(o);s.disabled||(s.expanded?t.persist&&(s.disabled=!0,s.button.ariaDisabled="true"):(s.close(),s.disabled=!0,s.button.ariaDisabled="true",s.button.classList.add(n.disabled)))},e.close=o=>{let s=c(o);if(t.multiple&&s.expanded)f(s);else for(let u of l.folds)if(u.expanded){if(t.persist&&u.number===s.number)break;f(u),s=u;break}s.enable(),a.emit("collapse",l,s)},e.toggle=()=>{if(!a.emit("toggle",l,e))return e.expanded?e.close():e.open()},e.destroy=(o=!1)=>{e.close(),e.button.removeEventListener("click",e.toggle),e.button.removeEventListener("focus",e.focus),e.button.removeEventListener("blur",e.blur),o&&(l.element.removeChild(e.content),l.element.removeChild(e.button))},e.button.addEventListener("click",e.toggle),e.button.addEventListener("focus",e.focus),e.button.addEventListener("blur",e.blur),l.folds.push(e)}}var E=l=>{let a=l.trim();if(!/true|false/.test(a))throw new TypeError(`Invalid value. Boolean expected, received: ${a}`);return a==="true"},F=(l,a)=>{typeof l!="object"&&(l=Object.create(null));let t=Object.create(null),n=Object.create(null);n.initial="initial",n.opened="opened",n.disabled="disabled",n.expanded="expanded",n.focused="focused","classes"in l&&Object.assign(n,l.classes),t.classes=n,t.persist=!0,t.multiple=!1,t.schema="data-relapse",typeof l=="object"&&Object.assign(t,l);let e=/^(?:persist|multiple)$/,c=t.schema===null?5:t.schema.length+1;for(let{nodeName:f,nodeValue:o}of a){let s=f.slice(c);e.test(s)&&(t[s]=E(o))}return t};function b(l,a){window.relapse instanceof Map||(window.relapse=new Map);let t=Object.create(null);t.folds=[],t.events=Object.create(null),t.element=typeof l=="string"?document.body.querySelector(l):l,t.id=`A${window.relapse.size}`,t.config=F(a,t.element.attributes);let n=t.element.getAttribute("data-relapse"),e=t.element.getAttribute("id");if(n===null&&e===null)n=t.id;else if(n!==null&&e!==null){if(window.relapse.has(e)||window.relapse.has(n))throw new TypeError(`An existing instance is using id "${n}"`)}else n===null&&e!==null&&(n=e);if(window.relapse.has(n))throw new TypeError(`An existing instance is using id "${n}"`);t.element.ariaMultiSelectable=`${t.config.multiple}`;let c=t.element.children,f=c.length,o=y(t.events),s=L(t,o),{classes:u}=t.config;for(let r=0;r<f;r=r+2){let d=c[r],p=c[r+1],i=Object.create(null);i.number=t.folds.length;let v=d.classList.contains(u.initial),h=d.classList.contains(u.opened),x=d.classList.contains(u.disabled),w=p.classList.contains(u.expanded);d.ariaExpanded==="true"||h||w||v?(h?d.ariaExpanded="true":d.classList.add(u.opened),w||p.classList.add(u.expanded),x||d.classList.add(u.disabled),v||d.classList.remove(u.initial),d.ariaDisabled="true",i.expanded=!0,i.disabled=!0):d.ariaDisabled==="true"||x?(x?d.ariaDisabled="false":d.classList.add(u.disabled),p.classList.remove(u.expanded),d.classList.remove(u.opened),d.ariaExpanded="false",i.expanded=!1,i.disabled=!0):(i.expanded=!1,i.disabled=!1,d.ariaExpanded="false",d.ariaDisabled="false"),d.id&&(i.id=d.id),p.id&&(i.id=p.id),"id"in i||(i.id=`${t.id}F${i.number}`,d.id=`B${i.id}`,p.id=`C${i.id}`),d.setAttribute("aria-controls",i.id),p.setAttribute("aria-labelledby",d.id),p.setAttribute("role","region"),i.button=d,i.content=p,i.expanded&&(i.content.style.maxHeight=`${i.content.scrollHeight}px`),s(i)}let m=(r,d,p=!1)=>{if(typeof d=="number")return r.charCodeAt(0)===100?t.folds[d][r](p):t.folds[d][r]();if(typeof d=="string"){for(let i of t.folds)if(i.button.dataset[`${t.config.schema}-fold`]===d)return r.charCodeAt(0)===100?i[r](p):i[r]()}throw new TypeError(`Fold does not exist: "${d}"`)};return t.on=o.on,t.off=o.off,t.collapse=r=>m("close",r),t.expand=r=>m("open",r),t.destroy=(r,d=!1)=>{if(typeof r>"u")for(let p of t.folds)p.destroy();else m("destroy",r,d);t.element.removeAttribute("aria-multiselectable"),o.emit("destroy",t),window.relapse.delete(n)},window.relapse.set(n,t),t}b.get=l=>l?window.relapse.get(l):window.relapse;b.load=()=>{document.readyState==="loading"&&setTimeout(b.load,50);let l=document.querySelectorAll("[data-relapse]");for(let a of l)a.getAttribute("data-relapse")!==""&&b(a)};var g=b;document.addEventListener("DOMContentLoaded",()=>{let l=g("#accordion");g.get(),console.log("Relapse Instances:",window.relapse),console.log("-".repeat(50)),l.on("toggle",function(o){console.log("Toggle Event: Fired"),console.log("Toggle Fold:",o),console.log("Toggle Scope:",this),console.log("-".repeat(50))}),l.on("focus",function(o){console.log("Focus Event: Fired"),console.log("Focus Fold:",o),console.log("Focus Scope:",this),console.log("-".repeat(50))}),l.on("expand",function(o){console.log("Expand Event: Fired"),console.log("Expand Fold:",o),console.log("Expand Scope:",this),console.log("-".repeat(50))}),l.on("collapse",function(o){console.log("Collapse Event: Fired"),console.log("Collapse Fold:",o),console.log("Collapse Scope:",this),console.log("-".repeat(50))}),document.querySelector("#fold-0").addEventListener("click",()=>{console.log("Programming Toggle: Fired on Fold with index 0"),console.log("-".repeat(50)),l.expand(0)}),document.querySelector("#fold-1").addEventListener("click",()=>{console.log("Programming Toggle: Fired on Fold with index 1"),console.log("-".repeat(50)),l.expand(1)});let n=document.querySelector("#fold-2"),e=!1;n.addEventListener("click",()=>{e?(console.log("Programming Enable: Enabled Fold 2"),console.log("-".repeat(50)),l.folds[2].enable(),n.innerHTML="Click to disable Fold 2",e=!1):(console.log("Programming Disable: Disabled Fold 2"),console.log("-".repeat(50)),l.folds[2].disable(),n.innerHTML="Fold 2 is disabled (click to enable)",e=!0)}),document.querySelector("#fold-3").addEventListener("click",()=>{console.log("Destroy: Destroyed Fold 3"),console.log("-".repeat(50)),l.folds[3].destroy(!0),n.innerHTML="Fold 3 was destroyed"}),document.querySelector("#fold-4").addEventListener("click",()=>{console.log("Programmatic Expand: Fold 4 is expanded"),console.log("Programmatic Expanf: Disabling persist"),l.config.persist=!1,console.log("-".repeat(50)),l.folds[4].expanded?l.collapse(4):l.expand(4)}),g("#expanded")});
