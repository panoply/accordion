function L(l){return{on:(a,d)=>{l[a]||(l[a]=[]),l[a].push(d)},off:(a,d)=>{let t=[],e=l[a];if(e&&d){let r=0,u=e.length;for(;r<u;r++)e[r]!==d&&t.push(e[r])}t.length?e[a]=t:delete e[a]},emit:(a,d,t)=>{let e=l[a]||[],r=e.length,u=null;for(let n=0;n<r;n++){let o=e[n].apply(d,[t]);u===null&&o===!1&&(u=!0)}return u}}}function E(l,a){let{config:d}=l,{classes:t}=d;return e=>{let r=n=>{if(typeof n!="number")return l.active!==e.number&&(l.active=e.number),e;if(l.folds[n])return l.active=e.number,l.folds[n];throw new TypeError(`No fold exists at index: ${n}`)},u=n=>{n.button.ariaDisabled="false",n.button.ariaExpanded="false",n.button.classList.remove(t.opened),n.content.classList.remove(t.expanded),n.expanded=!1,n.content.style.maxHeight="0"};e.open=n=>{let o=r(n);o.expanded||(o.close(),o.button.ariaDisabled="true",o.button.ariaExpanded="true",o.button.classList.add(t.opened),o.content.classList.add(t.expanded),o.content.style.maxHeight=`${o.content.scrollHeight}px`,o.expanded=!0,o.disable(),l.count=l.folds.filter(({expanded:b})=>b).length,a.emit("expand",l,o))},e.close=n=>{let o=r(n);if(d.multiple)(!d.persist||d.persist&&l.count>1)&&u(o);else for(let b of l.folds)if(b.expanded){if(d.persist&&b.number===o.number)break;u(b),o=b;break}o.enable(),l.count=l.folds.filter(({expanded:b})=>b).length,a.emit("collapse",l,o)},e.focus=()=>{l.active=e.number,e.button.classList.add(t.focused),a.emit("focus",l,e)},e.blur=()=>e.button.classList.remove(t.focused),e.enable=n=>{let o=r(n);o.disabled&&(o.disabled=!1,o.button.ariaDisabled="false",o.button.classList.remove(t.disabled))},e.disable=n=>{let o=r(n);o.disabled||(o.expanded?d.persist&&(o.disabled=!0,o.button.ariaDisabled="true"):(o.close(),o.disabled=!0,o.button.ariaDisabled="true",o.button.classList.add(t.disabled)))},e.toggle=()=>{if(!a.emit("toggle",l,e))return e.expanded?e.close():e.open()},e.destroy=(n=!1)=>{e.close(),e.button.removeEventListener("click",e.toggle),e.button.removeEventListener("focus",e.focus),e.button.removeEventListener("blur",e.blur),n&&(l.element.removeChild(e.content),l.element.removeChild(e.button))},e.button.addEventListener("click",e.toggle),e.button.addEventListener("focus",e.focus),e.button.addEventListener("blur",e.blur),l.folds.push(e)}}var F=l=>{let a=l.trim();if(!/true|false/.test(a))throw new TypeError(`Invalid value. Boolean expected, received: ${a}`);return a==="true"},$=(l,a)=>{typeof l!="object"&&(l=Object.create(null));let d=Object.create(null),t=Object.create(null);t.initial="initial",t.opened="opened",t.disabled="disabled",t.expanded="expanded",t.focused="focused","classes"in l&&Object.assign(t,l.classes),d.classes=t,d.persist=!0,d.multiple=!1,d.schema="data-relapse",typeof l=="object"&&Object.assign(d,l);let e=/^(?:persist|multiple)$/,r=d.schema===null?5:d.schema.length+1;for(let{nodeName:u,nodeValue:n}of a){let o=u.slice(r);e.test(o)&&(d[o]=F(n))}return d};function g(l,a){let d=typeof l=="string"?document.body.querySelector(l):l;if(!d)return;window.relapse instanceof Map||(window.relapse=new Map);let t=Object.create(null);t.folds=[],t.events=Object.create(null),t.element=d,t.id=`A${window.relapse.size}`,t.count=0,t.config=$(a,t.element.attributes);let e=t.element.getAttribute("data-relapse"),r=t.element.getAttribute("id");if(e===null&&r===null)e=t.id;else if(e!==null&&r!==null){if(window.relapse.has(r)||window.relapse.has(e))throw new TypeError(`An existing instance is using id "${e}"`)}else e===null&&r!==null&&(e=r);if(window.relapse.has(e))throw new TypeError(`An existing instance is using id "${e}"`);t.element.ariaMultiSelectable=`${t.config.multiple}`;let u=t.element.children,n=u.length,o=L(t.events),b=E(t,o),{classes:f}=t.config;for(let c=0;c<n;c=c+2){let s=u[c],p=u[c+1],i=Object.create(null);i.number=t.folds.length;let h=s.classList.contains(f.initial),w=s.classList.contains(f.opened),v=s.classList.contains(f.disabled),y=p.classList.contains(f.expanded);s.ariaExpanded==="true"||w||y||h?(w?s.ariaExpanded="true":s.classList.add(f.opened),y||p.classList.add(f.expanded),v||s.classList.add(f.disabled),h||s.classList.remove(f.initial),s.ariaDisabled="true",i.expanded=!0,i.disabled=!0):s.ariaDisabled==="true"||v?(v?s.ariaDisabled="false":s.classList.add(f.disabled),p.classList.remove(f.expanded),s.classList.remove(f.opened),s.ariaExpanded="false",i.expanded=!1,i.disabled=!0):(i.expanded=!1,i.disabled=!1,s.ariaExpanded="false",s.ariaDisabled="false"),s.id&&(i.id=s.id),p.id&&(i.id=p.id),"id"in i||(i.id=`${t.id}F${i.number}`,s.id=`B${i.id}`,p.id=`C${i.id}`),s.setAttribute("aria-controls",i.id),p.setAttribute("aria-labelledby",s.id),p.setAttribute("role","region"),i.button=s,i.content=p,i.expanded&&(t.count=t.count+1,i.content.style.maxHeight=`${i.content.scrollHeight}px`),b(i)}let x=(c,s,p=!1)=>{if(typeof s=="number")return c.charCodeAt(0)===100?t.folds[s][c](p):t.folds[s][c]();if(typeof s=="string"){for(let i of t.folds)if(i.button.dataset[`${t.config.schema}-fold`]===s)return c.charCodeAt(0)===100?i[c](p):i[c]()}throw new TypeError(`Fold does not exist: "${s}"`)};return t.on=o.on,t.off=o.off,t.collapse=c=>x("close",c),t.expand=c=>x("open",c),t.destroy=(c,s=!1)=>{if(typeof c>"u")for(let p of t.folds)p.destroy();else x("destroy",c,s);t.element.removeAttribute("aria-multiselectable"),o.emit("destroy",t),window.relapse.delete(e)},window.relapse.set(e,t),t}g.get=l=>l?window.relapse.get(l):window.relapse;g.load=()=>{document.readyState==="loading"&&setTimeout(g.load,50);let l=document.querySelectorAll("[data-relapse]");for(let a of l)a.getAttribute("data-relapse")!==""&&g(a)};var m=g;document.addEventListener("DOMContentLoaded",()=>{let l=m("#accordion");m.get(),console.log("Relapse Instances:",window.relapse),console.log("-".repeat(50)),l.on("toggle",function(n){console.log("Toggle Event: Fired"),console.log("Toggle Fold:",n),console.log("Toggle Scope:",this),console.log("-".repeat(50))}),l.on("focus",function(n){console.log("Focus Event: Fired"),console.log("Focus Fold:",n),console.log("Focus Scope:",this),console.log("-".repeat(50))}),l.on("expand",function(n){console.log("Expand Event: Fired"),console.log("Expand Fold:",n),console.log("Expand Scope:",this),console.log("-".repeat(50))}),l.on("collapse",function(n){console.log("Collapse Event: Fired"),console.log("Collapse Fold:",n),console.log("Collapse Scope:",this),console.log("-".repeat(50))}),document.querySelector("#fold-0").addEventListener("click",()=>{console.log("Programming Toggle: Fired on Fold with index 0"),console.log("-".repeat(50)),l.expand(0)}),document.querySelector("#fold-1").addEventListener("click",()=>{console.log("Programming Toggle: Fired on Fold with index 1"),console.log("-".repeat(50)),l.expand(1)});let t=document.querySelector("#fold-2"),e=!1;t.addEventListener("click",()=>{e?(console.log("Programming Enable: Enabled Fold 2"),console.log("-".repeat(50)),l.folds[2].enable(),t.innerHTML="Click to disable Fold 2",e=!1):(console.log("Programming Disable: Disabled Fold 2"),console.log("-".repeat(50)),l.folds[2].disable(),t.innerHTML="Fold 2 is disabled (click to enable)",e=!0)}),document.querySelector("#fold-3").addEventListener("click",()=>{console.log("Destroy: Destroyed Fold 3"),console.log("-".repeat(50)),l.folds[3].destroy(!0),t.innerHTML="Fold 3 was destroyed"}),document.querySelector("#fold-4").addEventListener("click",()=>{console.log("Programmatic Expand: Fold 4 is expanded"),console.log("Programmatic Expanf: Disabling persist"),l.config.persist=!1,console.log("-".repeat(50)),l.folds[4].expanded?l.collapse(4):l.expand(4)}),m("#expanded")});
