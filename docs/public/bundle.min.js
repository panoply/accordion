function h(t){return{on:(e,c)=>{t[e]||(t[e]=[]),t[e].push(c)},off:(e,c)=>{let p=[],s=t[e];if(s&&c){let o=0,d=s.length;for(;o<d;o++)s[o]!==c&&p.push(s[o])}p.length?s[e]=p:delete s[e]},emit:(e,c,p)=>{let s=t[e]||[],o=s.length,d=null;for(let b=0;b<o;b++){let r=s[b].apply(c,[p]);d===null&&r===!1&&(d=!0)}return d}}}function E(t,u){let{config:n}=t,{classes:l}=n;return e=>{let c=s=>{if(typeof s!="number")return t.active!==e.number&&(t.active=e.number),e;if(t.folds[s])return t.active=e.number,t.folds[s];throw new TypeError(`No fold exists at index: ${s}`)},p=s=>{s.button.ariaDisabled="false",s.button.ariaExpanded="false",s.button.classList.remove(l.opened),s.content.classList.remove(l.expanded),s.expanded=!1,s.content.style.maxHeight="0"};e.open=s=>{let o=c(s);o.expanded||o.disabled||(o.close(),o.button.ariaDisabled="true",o.button.ariaExpanded="true",o.button.classList.add(l.opened),o.content.classList.add(l.expanded),o.content.style.maxHeight=`${o.content.scrollHeight}px`,o.expanded=!0,o.disable(),u.emit("expand",t,o))},e.focus=()=>{t.active=e.number,e.button.classList.add(l.focused),u.emit("focus",t,e)},e.blur=()=>e.button.classList.remove(l.focused),e.enable=s=>{let o=c(s);o.disabled&&(o.disabled=!1,o.button.ariaDisabled="false",o.button.classList.remove(l.disabled))},e.disable=s=>{let o=c(s);o.disabled||(o.expanded?n.persist&&(o.disabled=!0,o.button.ariaDisabled="true"):(o.close(),o.disabled=!0,o.button.ariaDisabled="true",o.button.classList.add(l.disabled)))},e.close=s=>{let o=c(s);if(n.multiple&&o.expanded)p(o);else for(let d of t.folds)if(d.expanded){if(n.persist&&d.number===o.number)break;p(d),o=d;break}o.enable(),u.emit("collapse",t,o)},e.toggle=()=>{if(!u.emit("toggle",t,e))return e.expanded?e.close():e.open()},e.destroy=(s=!1)=>{e.close(),e.button.removeEventListener("click",e.toggle),e.button.removeEventListener("focus",e.focus),e.button.removeEventListener("blur",e.blur),s&&(t.element.removeChild(e.content),t.element.removeChild(e.button))},e.button.addEventListener("click",e.toggle),e.button.addEventListener("focus",e.focus),e.button.addEventListener("blur",e.blur),t.folds.push(e)}}var L=t=>{let u=t.trim();if(!/true|false/.test(u))throw new TypeError(`Invalid value. Boolean expected, received: ${u}`);return u==="true"},F=(t,u)=>{typeof t!="object"&&(t=Object.create(null));let n=Object.create(null),l=Object.create(null);l.initial="initial",l.opened="opened",l.disabled="disabled",l.expanded="expanded",l.focused="focused","classes"in t&&Object.assign(l,t.classes),n.classes=l,n.persist=!0,n.multiple=!1,n.schema="data-relapse",typeof t=="object"&&Object.assign(n,t);let e=/^(?:persist|multiple)$/,c=n.schema===null?5:n.schema.length+1;for(let{nodeName:p,nodeValue:s}of u){let o=p.slice(c);e.test(o)&&(n[o]=L(s))}return n};function g(t,u){window.relapse instanceof Map||(window.relapse=new Map);let n=Object.create(null);n.folds=[],n.events=Object.create(null),n.element=typeof t=="string"?document.body.querySelector(t):t,n.id=`A${window.relapse.size}`,n.config=F(u,n.element.attributes);let l=n.element.getAttribute("data-relapse"),e=n.element.getAttribute("id");if(l===null&&e===null)l=n.id;else if(l!==null&&e!==null){if(window.relapse.has(e)||window.relapse.has(l))throw new TypeError(`An existing instance is using id "${l}"`)}else l===null&&e!==null&&(l=e);if(window.relapse.has(l))throw new TypeError(`An existing instance is using id "${l}"`);n.element.ariaMultiSelectable=`${n.config.multiple}`;let c=n.element.children,p=c.length,s=h(n.events),o=E(n,s),{classes:d}=n.config;for(let r=0;r<p;r=r+2){let i=c[r],f=c[r+1],a=Object.create(null);a.number=n.folds.length;let v=i.classList.contains(d.initial),w=i.classList.contains(d.opened),x=i.classList.contains(d.disabled),y=f.classList.contains(d.expanded);i.ariaExpanded==="true"||w||y||v?(w?i.ariaExpanded="true":i.classList.add(d.opened),y||f.classList.add(d.expanded),x||i.classList.add(d.disabled),v||i.classList.remove(d.initial),i.ariaDisabled="true",a.expanded=!0,a.disabled=!0):i.ariaDisabled==="true"||x?(x?i.ariaDisabled="false":i.classList.add(d.disabled),f.classList.remove(d.expanded),i.classList.remove(d.opened),i.ariaExpanded="false",a.expanded=!1,a.disabled=!0):(a.expanded=!1,a.disabled=!1,i.ariaExpanded="false",i.ariaDisabled="false"),i.id&&(a.id=i.id),f.id&&(a.id=f.id),"id"in a||(a.id=`${n.id}F${a.number}`,i.id=`B${a.id}`,f.id=`C${a.id}`),i.setAttribute("aria-controls",a.id),f.setAttribute("aria-labelledby",i.id),f.setAttribute("role","region"),a.button=i,a.content=f,a.expanded&&(a.content.style.maxHeight=`${a.content.scrollHeight}px`),o(a)}let b=(r,i,f=!1)=>{if(typeof i=="number")return r.charCodeAt(0)===100?n.folds[i][r](f):n.folds[i][r]();if(typeof i=="string"){for(let a of n.folds)if(a.button.dataset[`${n.config.schema}-fold`]===i)return r.charCodeAt(0)===100?a[r](f):a[r]()}throw new TypeError(`Fold does not exist: "${i}"`)};return n.on=s.on,n.off=s.off,n.collapse=r=>b("close",r),n.expand=r=>b("open",r),n.destroy=(r,i=!1)=>{if(typeof r>"u")for(let f of n.folds)f.destroy();else b("destroy",r,i);n.element.removeAttribute("aria-multiselectable"),s.emit("destroy",n),window.relapse.delete(l)},window.relapse.set(l,n),n}g.get=t=>t?window.relapse.get(t):window.relapse;g.load=()=>{document.readyState==="loading"&&setTimeout(g.load,50);let t=document.querySelectorAll("[data-relapse]");for(let u of t)u.getAttribute("data-relapse")!==""&&g(u)};var m=g;document.addEventListener("DOMContentLoaded",()=>{let t=m("#accordion");m.get(),console.log("Relapse Instances:",window.relapse),console.log("-".repeat(50)),t.on("toggle",function(s){console.log("Toggle Event: Fired"),console.log("Toggle Fold:",s),console.log("Toggle Scope:",this),console.log("-".repeat(50))}),t.on("focus",function(s){console.log("Focus Event: Fired"),console.log("Focus Fold:",s),console.log("Focus Scope:",this),console.log("-".repeat(50))}),t.on("expand",function(s){console.log("Expand Event: Fired"),console.log("Expand Fold:",s),console.log("Expand Scope:",this),console.log("-".repeat(50))}),t.on("collapse",function(s){console.log("Collapse Event: Fired"),console.log("Collapse Fold:",s),console.log("Collapse Scope:",this),console.log("-".repeat(50))}),document.querySelector("#fold-0").addEventListener("click",()=>{console.log("Programming Toggle: Fired on Fold with index 0"),console.log("-".repeat(50)),t.expand(0)}),document.querySelector("#fold-1").addEventListener("click",()=>{console.log("Programming Toggle: Fired on Fold with index 1"),console.log("-".repeat(50)),t.expand(1)});let l=document.querySelector("#fold-2"),e=!1;l.addEventListener("click",()=>{e?(console.log("Programming Enable: Enabled Fold 2"),console.log("-".repeat(50)),t.folds[2].enable(),l.innerHTML="Click to disable Fold 2",e=!1):(console.log("Programming Disable: Disabled Fold 2"),console.log("-".repeat(50)),t.folds[2].disable(),l.innerHTML="Fold 2 is disabled (click to enable)",e=!0)}),document.querySelector("#fold-3").addEventListener("click",()=>{console.log("Destroy: Destroyed Fold 3"),console.log("-".repeat(50)),t.folds[3].destroy(!0),l.innerHTML="Fold 3 was destroyed"}),document.querySelector("#fold-4").addEventListener("click",()=>{console.log("Programmatic Expand: Fold 4 is expanded"),console.log("Programmatic Expanf: Disabling persist"),t.config.persist=!1,console.log("-".repeat(50)),t.folds[4].expanded?t.collapse(4):t.expand(4)}),m("#expanded")});
