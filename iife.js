(()=>{function L(s){return{on:(e,c)=>{s[e]||(s[e]=[]),s[e].push(c)},off:(e,c)=>{let p=[],i=s[e];if(i&&c){let n=0,o=i.length;for(;n<o;n++)i[n]!==c&&p.push(i[n])}p.length?i[e]=p:delete i[e]},emit:(e,c,p)=>{let i=s[e]||[],n=i.length,o=null;for(let f=0;f<n;f++){let d=i[f].apply(c,[p]);o===null&&d===!1&&(o=!0)}return o}}}function h(s,u){let{config:t}=s,{classes:l}=t;return e=>{let c=i=>{if(typeof i!="number")return s.active!==e.number&&(s.active=e.number),e;if(s.folds[i])return s.active=e.number,s.folds[i];throw new TypeError(`No fold exists at index: ${i}`)},p=i=>{i.button.ariaDisabled="false",i.button.ariaExpanded="false",i.button.classList.remove(l.opened),i.content.classList.remove(l.expanded),i.expanded=!1,i.content.style.maxHeight="0"};e.open=i=>{let n=c(i);n.expanded||n.disabled||(n.close(),n.button.ariaDisabled="true",n.button.ariaExpanded="true",n.button.classList.add(l.opened),n.content.classList.add(l.expanded),n.content.style.maxHeight=`${n.content.scrollHeight}px`,n.expanded=!0,n.disable(),u.emit("expand",s,n))},e.focus=()=>{s.active=e.number,e.button.classList.add(l.focused),u.emit("focus",s,e)},e.blur=()=>e.button.classList.remove(l.focused),e.enable=i=>{let n=c(i);n.disabled&&(n.disabled=!1,n.button.ariaDisabled="false",n.button.classList.remove(l.disabled))},e.disable=i=>{let n=c(i);n.disabled||(n.expanded?t.persist&&(n.disabled=!0,n.button.ariaDisabled="true"):(n.close(),n.disabled=!0,n.button.ariaDisabled="true",n.button.classList.add(l.disabled)))},e.close=i=>{let n=c(i);if(t.multiple&&n.expanded)p(n);else for(let o of s.folds)if(o.expanded){if(t.persist&&o.number===n.number)break;p(o),n=o;break}n.enable(),u.emit("collapse",s,n)},e.toggle=()=>{if(!u.emit("toggle",s,e))return e.expanded?e.close():e.open()},e.destroy=(i=!1)=>{e.close(),e.button.removeEventListener("click",e.toggle),e.button.removeEventListener("focus",e.focus),e.button.removeEventListener("blur",e.blur),i&&(s.element.removeChild(e.content),s.element.removeChild(e.button))},e.button.addEventListener("click",e.toggle),e.button.addEventListener("focus",e.focus),e.button.addEventListener("blur",e.blur),s.folds.push(e)}}var E=s=>{let u=s.trim();if(!/true|false/.test(u))throw new TypeError(`Invalid value. Boolean expected, received: ${u}`);return u==="true"},$=(s,u)=>{typeof s!="object"&&(s=Object.create(null));let t=Object.create(null),l=Object.create(null);l.initial="initial",l.opened="opened",l.disabled="disabled",l.expanded="expanded",l.focused="focused","classes"in s&&Object.assign(l,s.classes),t.classes=l,t.persist=!0,t.multiple=!1,t.schema="data-relapse",typeof s=="object"&&Object.assign(t,s);let e=/^(?:persist|multiple)$/,c=t.schema===null?5:t.schema.length+1;for(let{nodeName:p,nodeValue:i}of u){let n=p.slice(c);e.test(n)&&(t[n]=E(i))}return t};function m(s,u){window.relapse instanceof Map||(window.relapse=new Map);let t=Object.create(null);t.folds=[],t.events=Object.create(null),t.element=typeof s=="string"?document.body.querySelector(s):s,t.id=`A${window.relapse.size}`,t.config=$(u,t.element.attributes);let l=t.element.getAttribute("data-relapse"),e=t.element.getAttribute("id");if(l===null&&e===null)l=t.id;else if(l!==null&&e!==null){if(window.relapse.has(e)||window.relapse.has(l))throw new TypeError(`An existing instance is using id "${l}"`)}else l===null&&e!==null&&(l=e);if(window.relapse.has(l))throw new TypeError(`An existing instance is using id "${l}"`);t.element.ariaMultiSelectable=`${t.config.multiple}`;let c=t.element.children,p=c.length,i=L(t.events),n=h(t,i),{classes:o}=t.config;for(let d=0;d<p;d=d+2){let a=c[d],b=c[d+1],r=Object.create(null);r.number=t.folds.length;let x=a.classList.contains(o.initial),y=a.classList.contains(o.opened),g=a.classList.contains(o.disabled),w=b.classList.contains(o.expanded);a.ariaExpanded==="true"||y||w||x?(y?a.ariaExpanded="true":a.classList.add(o.opened),w||b.classList.add(o.expanded),g||a.classList.add(o.disabled),x||a.classList.remove(o.initial),a.ariaDisabled="true",r.expanded=!0,r.disabled=!0):a.ariaDisabled==="true"||g?(g?a.ariaDisabled="false":a.classList.add(o.disabled),b.classList.remove(o.expanded),a.classList.remove(o.opened),a.ariaExpanded="false",r.expanded=!1,r.disabled=!0):(r.expanded=!1,r.disabled=!1,a.ariaExpanded="false",a.ariaDisabled="false"),a.id&&(r.id=a.id),b.id&&(r.id=b.id),"id"in r||(r.id=`${t.id}F${r.number}`,a.id=`B${r.id}`,b.id=`C${r.id}`),a.setAttribute("aria-controls",r.id),b.setAttribute("aria-labelledby",a.id),b.setAttribute("role","region"),r.button=a,r.content=b,r.expanded&&(r.content.style.maxHeight=`${r.content.scrollHeight}px`),n(r)}let f=(d,a,b=!1)=>{if(typeof a=="number")return d.charCodeAt(0)===100?t.folds[a][d](b):t.folds[a][d]();if(typeof a=="string"){for(let r of t.folds)if(r.button.dataset[`${t.config.schema}-fold`]===a)return d.charCodeAt(0)===100?r[d](b):r[d]()}throw new TypeError(`Fold does not exist: "${a}"`)};return t.on=i.on,t.off=i.off,t.collapse=d=>f("close",d),t.expand=d=>f("open",d),t.destroy=(d,a=!1)=>{if(typeof d=="undefined")for(let b of t.folds)b.destroy();else f("destroy",d,a);t.element.removeAttribute("aria-multiselectable"),i.emit("destroy",t),window.relapse.delete(l)},window.relapse.set(l,t),t}m.get=s=>s?window.relapse.get(s):window.relapse;m.load=()=>{document.readyState==="loading"&&setTimeout(m.load,50);let s=document.querySelectorAll("[data-relapse]");for(let u of s)u.getAttribute("data-relapse")!==""&&m(u)};var v=m;document.readyState!=="loading"?v.load():document.addEventListener("DOMContentLoaded",v.load);})();
